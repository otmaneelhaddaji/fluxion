define(["knockout","underscore","jquery","service","config/config"],function(e,n,t,i,a){function r(){function i(e){return n.filter(m,function(n){return n.parent&&n.parent==e.hash&&(n.requireLogin&&a.loggedIn()||!n.requireLogin)})}var a=this,r=f();a.loggedIn=e.observable(r),a.showMenu=e.observable(r||b);var s=n.filter(m,function(e){return"1"==e.level&&(e.requireLogin&&a.loggedIn()||!e.requireLogin)&&"#login"!=e.hash});a.mainMenu=e.observableArray(s),a.secondMenu=e.observableArray([]),a.curThirdMenu,a.getThirdMenu=function(e){a.curThirdMenu=i(e)},a.thirdMenu=function(){return a.curThirdMenu},a.changeMenu=function(e){var n=i(e);return 0==n.length?t("#container").addClass("fixContainerWidth"):t("#container").removeClass("fixContainerWidth"),a.secondMenu(n),!0}}function s(){for(var e=window.location.hash,i=n.find(m,function(n){return n.hash==e});i.parent;)i=n.find(m,function(e){return e.hash==i.parent});if(!i.parent){t("#list-nav li").removeClass("active");var a=i.hash.substring(1,i.hash.length);t("#list-nav li[mid="+a+"]").addClass("active")}p.changeMenu(i)}function u(){var e=window.location.hash,i=n.find(m,function(n){return n.hash==e});1==i.level&&o("two",i),2==i.level&&(o("three",i),h(i.hash,i.level)),3==i.level&&(h(i.parent,i.level),t(".menu-three-level").removeClass("active"),t(".menu-three-level."+i.hash.substring(1)).addClass("active"))}function o(e,i){var a=n.find(m,function(e){return e.parent==i.hash&&e.path==i.path});t(".menu-"+e+"-level").removeClass("active"),a&&("two"==e&&(o("three",a),h(a.hash,e)),t(".menu-"+e+"-level."+a.hash.substring(1)).addClass("active"))}function h(e,i){$obj=t(".menu-two-level."+e.substring(1));var a=["3","three","2","two"];-1!=n.indexOf(a,i)&&$obj.hasClass("active")||($obj.siblings().removeClass("active"),$obj.addClass("active"),$obj.siblings().not(".menu-two-level").slideUp(),$obj.next().has("ul li").slideDown())}function l(){p=new r,e.applyBindings(p,t("#nav")[0]),d(p.mainMenu().length),e.applyBindings(p,t("#left")[0])}function c(e){e=e||window.location.hash;var t=f();return n.filter(m,function(n){return e==n.hash&&(n.requireLogin&&t||!n.requireLogin)})}function v(){var e=f(),i=n.filter(m,function(n){return"1"==n.level&&(n.requireLogin&&e||!n.requireLogin)&&"#login"!=n.hash});p.mainMenu(i),p.loggedIn(e),d(p.mainMenu().length),p.showMenu(e||b),t("#nav").translate()}function d(e){var n=100/e;t("ul#list-nav li").each(function(){t(this).css("width",n+"%")}),t("ul#list-nav li:first").addClass("home_icon")}function f(){return"loggedIn"==i.getLoginStatus().status}function g(e){for(var n=0;n<m.length;n++)if(m[n].path==e)return!0;return!1}var p,b=!1,m=[];if("CPE"==a.PRODUCT_TYPE){switch(a.opms_wan_mode){case"BRIDGE":M="menu_bridge";break;case"AUTO_LTE_GATEWAY":M="menu_4ggateway";break;case"AUTO_PPPOE":case"AUTO_DHCP":M="menu_pppoe";break;case"PPPOE":case"DHCP":case"STATIC":M="menu_pppoe";break;case"PPP":default:M="menu_4ggateway"}require(["config/"+a.DEVICE+"/"+M],function(e){m=e})}else require(["config/"+a.DEVICE+"/menu"],function(e){m=e,a.SD_CARD_SUPPORT&&(m=m.concat([{hash:"#httpshare_guest",path:"sd/httpshare",level:"",requireLogin:!1,checkSIMStatus:!1},{hash:"#sdcard",path:"sd/sd",level:"",requireLogin:!0,checkSIMStatus:!1},{hash:"#httpshare",path:"sd/httpshare",level:"",requireLogin:!0,checkSIMStatus:!1}]))});var M="";return m=m.concat([{hash:"#stk",path:"stk/stk",level:"",requireLogin:!0,checkSIMStatus:!0}]),{init:l,refreshMenu:s,findMenu:c,activeSubMenu:u,rebuild:v,checkIsMenuExist:g}});
//# sourceMappingURL=../../sourcemaps/config/menu.js.map
